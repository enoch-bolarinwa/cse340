<%- include('../partials/head') %>
<%- include('../partials/header') %>
<%- include('../partials/navigation') %>

<main>
  <h1><%= title %></h1>
  
  <%- messages() %>

  <!-- TEMPORARY DEBUG - REMOVE AFTER TESTING -->
  <div style="background: #ffffcc; border: 2px solid #ff9900; padding: 15px; margin: 10px 0;">
    <h3>üêõ DEBUG INFO:</h3>
    <p><strong>Logged in:</strong> <%= locals.loggedin %></p>
    <p><strong>Account Data exists:</strong> <%= locals.accountData ? 'YES' : 'NO' %></p>
    <% if (locals.accountData) { %>
      <p><strong>First Name:</strong> <%= accountData.account_firstname %></p>
      <p><strong>Last Name:</strong> <%= accountData.account_lastname %></p>
      <p><strong>Email:</strong> <%= accountData.account_email %></p>
      <p><strong>Account Type:</strong> '<%= accountData.account_type %>'</p>
      <p><strong>Account ID:</strong> <%= accountData.account_id %></p>
    <% } else { %>
      <p style="color: red;">‚ùå No account data available!</p>
    <% } %>
  </div>
  
  <% if (locals.loggedin && accountData) { %>
    <h2>Welcome <%= accountData.account_firstname %></h2>
    
    <p>You're logged in</p>
    
    <h3>Account Actions</h3>
    <ul>
      <li><a href="/account/update/<%= accountData.account_id %>">Update Account Information</a></li>
    </ul>
    
    <!-- Inventory Management - only for Employee/Admin -->
    <% if (accountData.account_type === 'employee' || accountData.account_type === 'admin') { %>
      <h3>Inventory Management</h3>
      <p><a href="/inv/">Manage Inventory</a></p>
    <% } %>
    
    <!-- Admin Only - Activity Log -->
    <% if (accountData.account_type === 'admin') { %>
      <h3>Admin Tools</h3>
      <p><a href="/profile/activity-log">View System Activity Log</a></p>
    <% } %>
  <% } else { %>
    <p>Please log in to access account management.</p>
  <% } %>
</main>

<%- include('../partials/footer') %>